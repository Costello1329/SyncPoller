{
  "type": "object",
  "properties": {
    "session": { "$ref": "#/definitions/Guid" },
    "poll": { "$ref": "#/definitions/Guid" },
    "answer": {
      "type": "object",
      "properties": {
        "guid": { "$ref": "#/definitions/Guid" },
        "data": { "$ref": "#/definitions/PollSolution" }
      },
      "required": ["guid", "data"],
      "additionalProperties": false
    }
  },
  "required": ["session", "poll", "answer"],
  "additionalProperties": false,
  "definitions": {
    "Guid": {
      "type": "string",
      "pattern":
        "[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[8-b][0-9a-f]{3}-[0-9a-f]{12}"
    },

    "PollSolution": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "checkbox"
            },
            "data": {
              "type": "array",
              "items": [{ "type": "boolean" }],
              "additionalItems": { "type": "boolean" }
            }
          },
          "required": ["type", "data"],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "radio"
            },
            "data": {
              "oneOf": [
                {
                  "type": "integer",
                  "minminimum": 0
                },
                { "const": null }
              ]
            }
          },
          "required": ["type", "data"],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "textfield"
            },
            "data": { "type": "string" }
          },
          "required": ["type", "data"],
          "additionalProperties": false
        }
      ]
    }
  }
}
